{"version":3,"file":"static/js/413.d977c57f.chunk.js","mappings":"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","sources":["../index.ts","../node_modules/async-mutex/lib/Mutex.js","../node_modules/async-mutex/lib/Semaphore.js","../node_modules/async-mutex/lib/index.js","../node_modules/async-mutex/lib/withTimeout.js","../node_modules/eth-block-tracker/src/base.js","../node_modules/eth-block-tracker/src/polling.js","../node_modules/eth-json-rpc-filters/base-filter-history.js","../node_modules/eth-json-rpc-filters/base-filter.js","../node_modules/eth-json-rpc-filters/block-filter.js","../node_modules/eth-json-rpc-filters/getBlocksForRange.js","../node_modules/eth-json-rpc-filters/hexUtils.js","../node_modules/eth-json-rpc-filters/index.js","../node_modules/eth-json-rpc-filters/log-filter.js","../node_modules/eth-json-rpc-filters/node_modules/eth-json-rpc-middleware/node_modules/json-rpc-engine/src/createScaffoldMiddleware.js","../node_modules/eth-json-rpc-filters/node_modules/eth-json-rpc-middleware/scaffold.js","../node_modules/eth-json-rpc-filters/node_modules/pify/index.js","../node_modules/eth-json-rpc-filters/subscriptionManager.js","../node_modules/eth-json-rpc-filters/tx-filter.js","../node_modules/eth-query/index.js","../node_modules/fast-safe-stringify/index.js","../../src/JsonRpcEngine.ts","../../src/createAsyncMiddleware.ts","../../src/createScaffoldMiddleware.ts","../../src/getUniqueId.ts","../../src/idRemapMiddleware.ts","../../src/index.ts","../../src/mergeMiddleware.ts","../../src/classes.ts","../../src/error-constants.ts","../../src/errors.ts","../../src/utils.ts","../node_modules/json-rpc-random-id/index.js","../node_modules/pify/index.js","../node_modules/safe-event-emitter/index.js","../node_modules/string_decoder/lib/string_decoder.js","../node_modules/string_decoder/node_modules/safe-buffer/index.js","../node_modules/util-deprecate/browser.js","../node_modules/xtend/immutable.js"],"sourcesContent":[null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar Semaphore_1 = require(\"./Semaphore\");\nvar Mutex = /** @class */ (function () {\n    function Mutex() {\n        this._semaphore = new Semaphore_1.default(1);\n    }\n    Mutex.prototype.acquire = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, releaser;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._semaphore.acquire()];\n                    case 1:\n                        _a = _b.sent(), releaser = _a[1];\n                        return [2 /*return*/, releaser];\n                }\n            });\n        });\n    };\n    Mutex.prototype.runExclusive = function (callback) {\n        return this._semaphore.runExclusive(function () { return callback(); });\n    };\n    Mutex.prototype.isLocked = function () {\n        return this._semaphore.isLocked();\n    };\n    Mutex.prototype.release = function () {\n        this._semaphore.release();\n    };\n    return Mutex;\n}());\nexports.default = Mutex;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar Semaphore = /** @class */ (function () {\n    function Semaphore(_maxConcurrency) {\n        this._maxConcurrency = _maxConcurrency;\n        this._queue = [];\n        if (_maxConcurrency <= 0) {\n            throw new Error('semaphore must be initialized to a positive value');\n        }\n        this._value = _maxConcurrency;\n    }\n    Semaphore.prototype.acquire = function () {\n        var _this = this;\n        var locked = this.isLocked();\n        var ticket = new Promise(function (r) { return _this._queue.push(r); });\n        if (!locked)\n            this._dispatch();\n        return ticket;\n    };\n    Semaphore.prototype.runExclusive = function (callback) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, value, release;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.acquire()];\n                    case 1:\n                        _a = _b.sent(), value = _a[0], release = _a[1];\n                        _b.label = 2;\n                    case 2:\n                        _b.trys.push([2, , 4, 5]);\n                        return [4 /*yield*/, callback(value)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        release();\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Semaphore.prototype.isLocked = function () {\n        return this._value <= 0;\n    };\n    Semaphore.prototype.release = function () {\n        if (this._maxConcurrency > 1) {\n            throw new Error('this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead');\n        }\n        if (this._currentReleaser) {\n            var releaser = this._currentReleaser;\n            this._currentReleaser = undefined;\n            releaser();\n        }\n    };\n    Semaphore.prototype._dispatch = function () {\n        var _this = this;\n        var nextConsumer = this._queue.shift();\n        if (!nextConsumer)\n            return;\n        var released = false;\n        this._currentReleaser = function () {\n            if (released)\n                return;\n            released = true;\n            _this._value++;\n            _this._dispatch();\n        };\n        nextConsumer([this._value--, this._currentReleaser]);\n    };\n    return Semaphore;\n}());\nexports.default = Semaphore;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withTimeout = exports.Semaphore = exports.Mutex = void 0;\nvar Mutex_1 = require(\"./Mutex\");\nObject.defineProperty(exports, \"Mutex\", { enumerable: true, get: function () { return Mutex_1.default; } });\nvar Semaphore_1 = require(\"./Semaphore\");\nObject.defineProperty(exports, \"Semaphore\", { enumerable: true, get: function () { return Semaphore_1.default; } });\nvar withTimeout_1 = require(\"./withTimeout\");\nObject.defineProperty(exports, \"withTimeout\", { enumerable: true, get: function () { return withTimeout_1.withTimeout; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withTimeout = void 0;\nvar tslib_1 = require(\"tslib\");\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = new Error('timeout'); }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var isTimeout, ticket, release;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 1:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                resolve(ticket);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var release, ticket;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        release: function () {\n            sync.release();\n        },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\nexports.withTimeout = withTimeout;\n","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst SafeEventEmitter = require('safe-event-emitter')\n\nconst sec = 1000\n\nconst calculateSum = (accumulator, currentValue) => accumulator + currentValue\nconst blockTrackerEvents = ['sync', 'latest']\n\nclass BaseBlockTracker extends SafeEventEmitter {\n\n  //\n  // public\n  //\n\n  constructor (opts = {}) {\n    super()\n    // config\n    this._blockResetDuration = opts.blockResetDuration || 20 * sec\n    // state\n    this._blockResetTimeout\n    this._currentBlock = null\n    this._isRunning = false\n    // bind functions for internal use\n    this._onNewListener = this._onNewListener.bind(this)\n    this._onRemoveListener = this._onRemoveListener.bind(this)\n    this._resetCurrentBlock = this._resetCurrentBlock.bind(this)\n    // listen for handler changes\n    this._setupInternalEvents()\n  }\n\n  isRunning () {\n    return this._isRunning\n  }\n\n  getCurrentBlock () {\n    return this._currentBlock\n  }\n\n  async getLatestBlock () {\n    // return if available\n    if (this._currentBlock) return this._currentBlock\n    // wait for a new latest block\n    const latestBlock = await new Promise(resolve => this.once('latest', resolve))\n    // return newly set current block\n    return latestBlock\n  }\n\n  // dont allow module consumer to remove our internal event listeners\n  removeAllListeners (eventName) {\n    // perform default behavior, preserve fn arity\n    if (eventName) {\n      super.removeAllListeners(eventName)\n    } else {\n      super.removeAllListeners()\n    }\n    // re-add internal events\n    this._setupInternalEvents()\n    // trigger stop check just in case\n    this._onRemoveListener()\n  }\n\n  //\n  // to be implemented in subclass\n  //\n\n  _start () {\n    // default behavior is noop\n  }\n\n  _end () {\n    // default behavior is noop\n  }\n\n  //\n  // private\n  //\n\n  _setupInternalEvents () {\n    // first remove listeners for idempotence\n    this.removeListener('newListener', this._onNewListener)\n    this.removeListener('removeListener', this._onRemoveListener)\n    // then add them\n    this.on('newListener', this._onNewListener)\n    this.on('removeListener', this._onRemoveListener)\n  }\n\n  _onNewListener (eventName, handler) {\n    // `newListener` is called *before* the listener is added\n    if (!blockTrackerEvents.includes(eventName)) return\n    this._maybeStart()\n  }\n\n  _onRemoveListener (eventName, handler) {\n    // `removeListener` is called *after* the listener is removed\n    if (this._getBlockTrackerEventCount() > 0) return\n    this._maybeEnd()\n  }\n\n  _maybeStart () {\n    if (this._isRunning) return\n    this._isRunning = true\n    // cancel setting latest block to stale\n    this._cancelBlockResetTimeout()\n    this._start()\n  }\n\n  _maybeEnd () {\n    if (!this._isRunning) return\n    this._isRunning = false\n    this._setupBlockResetTimeout()\n    this._end()\n  }\n\n  _getBlockTrackerEventCount () {\n    return blockTrackerEvents\n      .map(eventName => this.listenerCount(eventName))\n      .reduce(calculateSum)\n  }\n\n  _newPotentialLatest (newBlock) {\n    const currentBlock = this._currentBlock\n    // only update if blok number is higher\n    if (currentBlock && (hexToInt(newBlock) <= hexToInt(currentBlock))) return\n    this._setCurrentBlock(newBlock)\n  }\n\n  _setCurrentBlock (newBlock) {\n    const oldBlock = this._currentBlock\n    this._currentBlock = newBlock\n    this.emit('latest', newBlock)\n    this.emit('sync', { oldBlock, newBlock })\n  }\n\n  _setupBlockResetTimeout () {\n    // clear any existing timeout\n    this._cancelBlockResetTimeout()\n    // clear latest block when stale\n    this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this._blockResetDuration)\n    // nodejs - dont hold process open\n    if (this._blockResetTimeout.unref) {\n      this._blockResetTimeout.unref()\n    }\n  }\n\n  _cancelBlockResetTimeout () {\n    clearTimeout(this._blockResetTimeout)\n  }\n\n  _resetCurrentBlock () {\n    this._currentBlock = null\n  }\n\n}\n\nmodule.exports = BaseBlockTracker\n\nfunction hexToInt(hexInt) {\n  return Number.parseInt(hexInt, 16)\n}\n","const pify = require('pify')\nconst BaseBlockTracker = require('./base')\n\nconst sec = 1000\n\nclass PollingBlockTracker extends BaseBlockTracker {\n\n  constructor (opts = {}) {\n    // parse + validate args\n    if (!opts.provider) throw new Error('PollingBlockTracker - no provider specified.')\n    const pollingInterval = opts.pollingInterval || 20 * sec\n    const retryTimeout = opts.retryTimeout || pollingInterval / 10\n    const keepEventLoopActive = opts.keepEventLoopActive !== undefined ? opts.keepEventLoopActive : true\n    const setSkipCacheFlag = opts.setSkipCacheFlag || false\n    // BaseBlockTracker constructor\n    super(Object.assign({\n      blockResetDuration: pollingInterval,\n    }, opts))\n    // config\n    this._provider = opts.provider\n    this._pollingInterval = pollingInterval\n    this._retryTimeout = retryTimeout\n    this._keepEventLoopActive = keepEventLoopActive\n    this._setSkipCacheFlag = setSkipCacheFlag\n  }\n\n  //\n  // public\n  //\n\n  // trigger block polling\n  async checkForLatestBlock () {\n    await this._updateLatestBlock()\n    return await this.getLatestBlock()\n  }\n\n  //\n  // private\n  //\n\n  _start () {\n    this._performSync().catch(err => this.emit('error', err))\n  }\n\n  async _performSync () {\n    while (this._isRunning) {\n      try {\n        await this._updateLatestBlock()\n        await timeout(this._pollingInterval, !this._keepEventLoopActive)\n      } catch (err) {\n        const newErr = new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\\n${err.stack}`)\n        try {\n          this.emit('error', newErr)\n        } catch (emitErr) {\n          console.error(newErr)\n        }\n        await timeout(this._retryTimeout, !this._keepEventLoopActive)\n      }\n    }\n  }\n\n  async _updateLatestBlock () {\n    // fetch + set latest block\n    const latestBlock = await this._fetchLatestBlock()\n    this._newPotentialLatest(latestBlock)\n  }\n\n  async _fetchLatestBlock () {\n    const req = { jsonrpc: \"2.0\", id: 1, method: 'eth_blockNumber', params: [] }\n    if (this._setSkipCacheFlag) req.skipCache = true\n    const res = await pify((cb) => this._provider.sendAsync(req, cb))()\n    if (res.error) throw new Error(`PollingBlockTracker - encountered error fetching block:\\n${res.error}`)\n    return res.result\n  }\n\n}\n\nmodule.exports = PollingBlockTracker\n\nfunction timeout (duration, unref) {\n  return new Promise(resolve => {\n    const timoutRef = setTimeout(resolve, duration)\n    // don't keep process open\n    if (timoutRef.unref && unref) {\n      timoutRef.unref()\n    }\n  })\n}\n","const BaseFilter = require('./base-filter')\n\n// tracks all results ever recorded\nclass BaseFilterWithHistory extends BaseFilter {\n\n  constructor () {\n    super()\n    this.allResults = []\n  }\n\n  async update () {\n    throw new Error('BaseFilterWithHistory - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addResults(newResults)\n  }\n\n  addInitialResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addInitialResults(newResults)\n  }\n\n  getAllResults () {\n    return this.allResults\n  }\n\n}\n\nmodule.exports = BaseFilterWithHistory","const SafeEventEmitter = require('@metamask/safe-event-emitter').default\n\nclass BaseFilter extends SafeEventEmitter {\n\n  constructor () {\n    super()\n    this.updates = []\n  }\n\n  async initialize () {}\n\n  async update () {\n    throw new Error('BaseFilter - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.updates = this.updates.concat(newResults)\n    newResults.forEach(result => this.emit('update', result))\n  }\n\n  addInitialResults (newResults) {}\n\n  getChangesAndClear () {\n    const updates = this.updates\n    this.updates = []\n    return updates\n  }\n  \n}\n\nmodule.exports = BaseFilter\n","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass BlockFilter extends BaseFilter {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'block'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    const toBlock = newBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blockBodies = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockHashes = blockBodies.map((block) => block.hash)\n    this.addResults(blockHashes)\n  }\n\n}\n\nmodule.exports = BlockFilter\n","module.exports = getBlocksForRange\n\nasync function getBlocksForRange({ provider, fromBlock, toBlock }) {\n  if (!fromBlock) fromBlock = toBlock\n\n  const fromBlockNumber = hexToInt(fromBlock)\n  const toBlockNumber = hexToInt(toBlock)\n  const blockCountToQuery = toBlockNumber - fromBlockNumber + 1\n  // load all blocks from old to new (inclusive)\n  const missingBlockNumbers = Array(blockCountToQuery).fill()\n                              .map((_,index) => fromBlockNumber + index)\n                              .map(intToHex)\n  const blockBodies = await Promise.all(\n    missingBlockNumbers.map(blockNum => query(provider, 'eth_getBlockByNumber', [blockNum, false]))\n  )\n  return blockBodies\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  const hexString = int.toString(16)\n  return '0x' + hexString\n}\n\nfunction query(provider, method, params) {\n  return new Promise((resolve, reject) => {\n    provider.sendAsync({ id: 1, jsonrpc: '2.0', method, params }, (err, res) => {\n      if (err) return reject(err)\n      resolve(res.result)\n    })\n  })\n}\n","\nmodule.exports = {\n  minBlockRef,\n  maxBlockRef,\n  sortBlockRefs,\n  bnToHex,\n  blockRefIsNumber,\n  hexToInt,\n  incrementHexInt,\n  intToHex,\n  unsafeRandomBytes,\n}\n\nfunction minBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[0]\n}\n\nfunction maxBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[sortedRefs.length-1]\n}\n\nfunction sortBlockRefs(refs) {\n  return refs.sort((refA, refB) => {\n    if (refA === 'latest' || refB === 'earliest') return 1\n    if (refB === 'latest' || refA === 'earliest') return -1\n    return hexToInt(refA) - hexToInt(refB)\n  })\n}\n\nfunction bnToHex(bn) {\n  return '0x' + bn.toString(16)\n}\n\nfunction blockRefIsNumber(blockRef){\n  return blockRef && !['earliest', 'latest', 'pending'].includes(blockRef)\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  let hexString = int.toString(16)\n  const needsLeftPad = hexString.length % 2\n  if (needsLeftPad) hexString = '0' + hexString\n  return '0x' + hexString\n}\n\nfunction unsafeRandomBytes(byteCount) {\n  let result = '0x'\n  for (let i = 0; i < byteCount; i++) {\n    result += unsafeRandomNibble()\n    result += unsafeRandomNibble()\n  }\n  return result\n}\n\nfunction unsafeRandomNibble() {\n  return Math.floor(Math.random() * 16).toString(16)\n}\n","const Mutex = require('async-mutex').Mutex\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createJsonRpcMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst LogFilter = require('./log-filter.js')\nconst BlockFilter = require('./block-filter.js')\nconst TxFilter = require('./tx-filter.js')\nconst { intToHex, hexToInt } = require('./hexUtils')\n\nmodule.exports = createEthFilterMiddleware\n\nfunction createEthFilterMiddleware({ blockTracker, provider }) {\n\n  // create filter collection\n  let filterIndex = 0\n  let filters = {}\n  // create update mutex\n  const mutex = new Mutex()\n  const waitForFree = mutexMiddlewareWrapper({ mutex })\n\n  const middleware = createJsonRpcMiddleware({\n    // install filters\n    eth_newFilter:                   waitForFree(toFilterCreationMiddleware(newLogFilter)),\n    eth_newBlockFilter:              waitForFree(toFilterCreationMiddleware(newBlockFilter)),\n    eth_newPendingTransactionFilter: waitForFree(toFilterCreationMiddleware(newPendingTransactionFilter)),\n    // uninstall filters\n    eth_uninstallFilter:             waitForFree(toAsyncRpcMiddleware(uninstallFilterHandler)),\n    // checking filter changes\n    eth_getFilterChanges:            waitForFree(toAsyncRpcMiddleware(getFilterChanges)),\n    eth_getFilterLogs:               waitForFree(toAsyncRpcMiddleware(getFilterLogs)),\n  })\n\n  // setup filter updating and destroy handler\n  const filterUpdater = async ({ oldBlock, newBlock }) => {\n    if (filters.length === 0) return\n    // lock update reads\n    const releaseLock = await mutex.acquire()\n    try {\n      // process all filters in parallel\n      await Promise.all(objValues(filters).map(async (filter) => {\n        try {\n         await filter.update({ oldBlock, newBlock })\n        } catch (err) {\n          // handle each error individually so filter update errors don't affect other filters\n          console.error(err)\n        }\n      }))\n    } catch (err) {\n      // log error so we don't skip the releaseLock\n      console.error(err)\n    }\n    // unlock update reads\n    releaseLock()\n  }\n\n  // expose filter methods directly\n  middleware.newLogFilter = newLogFilter\n  middleware.newBlockFilter = newBlockFilter\n  middleware.newPendingTransactionFilter = newPendingTransactionFilter\n  middleware.uninstallFilter = uninstallFilterHandler\n  middleware.getFilterChanges = getFilterChanges\n  middleware.getFilterLogs = getFilterLogs\n\n  // expose destroy method for cleanup\n  middleware.destroy = () => {\n    uninstallAllFilters()\n  }\n\n  return middleware\n\n  //\n  // new filters\n  //\n\n  async function newLogFilter(params) {\n    const filter = new LogFilter({ provider, params })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newBlockFilter() {\n    const filter = new BlockFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newPendingTransactionFilter() {\n    const filter = new TxFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  //\n  // get filter changes\n  //\n\n  async function getFilterChanges(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    const results = filter.getChangesAndClear()\n    return results\n  }\n\n  async function getFilterLogs(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    // only return results for log filters\n    if (filter.type === 'log') {\n      results = filter.getAllResults()\n    } else {\n      results = []\n    }\n    return results\n  }\n\n\n  //\n  // remove filters\n  //\n\n\n  async function uninstallFilterHandler(filterIndexHex) {\n    // check filter exists\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    const result = Boolean(filter)\n    // uninstall filter\n    if (result) {\n      await uninstallFilter(filterIndex)\n    }\n    return result\n  }\n\n  //\n  // utils\n  //\n\n  async function installFilter(filter) {\n    const prevFilterCount = objValues(filters).length\n    // install filter\n    const currentBlock = await blockTracker.getLatestBlock()\n    await filter.initialize({ currentBlock })\n    filterIndex++\n    filters[filterIndex] = filter\n    filter.id = filterIndex\n    filter.idHex = intToHex(filterIndex)\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n    return filterIndex\n  }\n\n  async function uninstallFilter(filterIndex) {\n    const prevFilterCount = objValues(filters).length\n    delete filters[filterIndex]\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n  }\n\n  async function uninstallAllFilters() {\n    const prevFilterCount = objValues(filters).length\n    filters = {}\n    // update block tracker subs\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount: 0 })\n  }\n\n  function updateBlockTrackerSubs({ prevFilterCount, newFilterCount }) {\n    // subscribe\n    if (prevFilterCount === 0 && newFilterCount > 0) {\n      blockTracker.on('sync', filterUpdater)\n      return\n    }\n    // unsubscribe\n    if (prevFilterCount > 0 && newFilterCount === 0) {\n      blockTracker.removeListener('sync', filterUpdater)\n      return\n    }\n  }\n\n}\n\n// helper for turning filter constructors into rpc middleware\nfunction toFilterCreationMiddleware(createFilterFn) {\n  return toAsyncRpcMiddleware(async (...args) => {\n    const filter = await createFilterFn(...args)\n    const result = intToHex(filter.id)\n    return result\n  })\n}\n\n// helper for pulling out req.params and setting res.result\nfunction toAsyncRpcMiddleware(asyncFn) {\n  return createAsyncMiddleware(async (req, res) => {\n    const result = await asyncFn.apply(null, req.params)\n    res.result = result\n  })\n}\n\nfunction mutexMiddlewareWrapper({ mutex }) {\n  return (middleware) => {\n    return async (req, res, next, end) => {\n      // wait for mutex available\n      // we can release immediately because\n      // we just need to make sure updates aren't active\n      const releaseLock = await mutex.acquire()\n      releaseLock()\n      middleware(req, res, next, end)\n    }\n  }\n}\n\nfunction objValues(obj, fn){\n  const values = []\n  for (let key in obj) {\n    values.push(obj[key])\n  }\n  return values\n}\n","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst BaseFilterWithHistory = require('./base-filter-history')\nconst { bnToHex, hexToInt, incrementHexInt, minBlockRef, blockRefIsNumber } = require('./hexUtils')\n\nclass LogFilter extends BaseFilterWithHistory {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'log'\n    this.ethQuery = new EthQuery(provider)\n    this.params = Object.assign({\n      fromBlock: 'latest',\n      toBlock: 'latest',\n      address: undefined,\n      topics: [],\n    }, params)\n    // normalize address parameter\n    if (this.params.address) {\n      // ensure array\n      if (!Array.isArray(this.params.address)) {\n        this.params.address = [this.params.address]\n      }\n      // ensure lowercase\n      this.params.address = this.params.address.map(address => address.toLowerCase())\n    }\n  }\n\n  async initialize({ currentBlock }) {\n    // resolve params.fromBlock\n    let fromBlock = this.params.fromBlock\n    if (['latest', 'pending'].includes(fromBlock)) fromBlock = currentBlock\n    if ('earliest' === fromBlock) fromBlock = '0x0'\n    this.params.fromBlock = fromBlock\n    // set toBlock for initial lookup\n    const toBlock = minBlockRef(this.params.toBlock, currentBlock)\n    const params = Object.assign({}, this.params, { toBlock })\n    // fetch logs and add to results\n    const newLogs = await this._fetchLogs(params)\n    this.addInitialResults(newLogs)\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    // configure params for this update\n    const toBlock = newBlock\n    let fromBlock\n    // oldBlock is empty on first sync\n    if (oldBlock) {\n      fromBlock = incrementHexInt(oldBlock)\n    } else {\n      fromBlock = newBlock\n    }\n    // fetch logs\n    const params = Object.assign({}, this.params, { fromBlock, toBlock })\n    const newLogs = await this._fetchLogs(params)\n    const matchingLogs = newLogs.filter(log => this.matchLog(log))\n\n    // add to results\n    this.addResults(matchingLogs)\n  }\n\n  async _fetchLogs (params) {\n    const newLogs = await pify(cb => this.ethQuery.getLogs(params, cb))()\n    // add to results\n    return newLogs\n  }\n\n  matchLog(log) {\n    // check if block number in bounds:\n    if (hexToInt(this.params.fromBlock) >= hexToInt(log.blockNumber)) return false\n    if (blockRefIsNumber(this.params.toBlock) && hexToInt(this.params.toBlock) <= hexToInt(log.blockNumber)) return false\n\n    // address is correct:\n    const normalizedLogAddress = log.address && log.address.toLowerCase()\n    if (this.params.address && normalizedLogAddress && !this.params.address.includes(normalizedLogAddress)) return false\n\n    // topics match:\n    // topics are position-dependant\n    // topics can be nested to represent `or` [[a || b], c]\n    // topics can be null, representing a wild card for that position\n    const topicsMatch = this.params.topics.every((topicPattern, index) => {\n      // pattern is longer than actual topics\n      let logTopic = log.topics[index]\n      if (!logTopic) return false\n      logTopic = logTopic.toLowerCase()\n      // normalize subTopics\n      let subtopicsToMatch = Array.isArray(topicPattern) ? topicPattern : [topicPattern]\n      // check for wild card\n      const subtopicsIncludeWildcard = subtopicsToMatch.includes(null)\n      if (subtopicsIncludeWildcard) return true\n      subtopicsToMatch = subtopicsToMatch.map(topic => topic.toLowerCase())\n      // check each possible matching topic\n      const topicDoesMatch = subtopicsToMatch.includes(logTopic)\n      return topicDoesMatch\n    })\n\n    return topicsMatch\n  }\n\n}\n\nmodule.exports = LogFilter\n","module.exports = function createScaffoldMiddleware (handlers) {\n  return (req, res, next, end) => {\n    const handler = handlers[req.method]\n    // if no handler, return\n    if (handler === undefined) {\n      return next()\n    }\n    // if handler is fn, call as middleware\n    if (typeof handler === 'function') {\n      return handler(req, res, next, end)\n    }\n    // if handler is some other value, use as result\n    res.result = handler\n    return end()\n  }\n}\n","// for backwards compat\nmodule.exports = require('json-rpc-engine/src/createScaffoldMiddleware')\n","'use strict';\n\nconst processFn = (fn, options, proxy, unwrapped) => function (...arguments_) {\n\tconst P = options.promiseModule;\n\n\treturn new P((resolve, reject) => {\n\t\tif (options.multiArgs) {\n\t\t\targuments_.push((...result) => {\n\t\t\t\tif (options.errorFirst) {\n\t\t\t\t\tif (result[0]) {\n\t\t\t\t\t\treject(result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.shift();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (options.errorFirst) {\n\t\t\targuments_.push((error, result) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targuments_.push(resolve);\n\t\t}\n\n\t\tconst self = this === proxy ? unwrapped : this;\n\t\tReflect.apply(fn, self, arguments_);\n\t});\n};\n\nconst filterCache = new WeakMap();\n\nmodule.exports = (input, options) => {\n\toptions = {\n\t\texclude: [/.+(?:Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise,\n\t\t...options\n\t};\n\n\tconst objectType = typeof input;\n\tif (!(input !== null && (objectType === 'object' || objectType === 'function'))) {\n\t\tthrow new TypeError(`Expected \\`input\\` to be a \\`Function\\` or \\`Object\\`, got \\`${input === null ? 'null' : objectType}\\``);\n\t}\n\n\tconst filter = (target, key) => {\n\t\tlet cached = filterCache.get(target);\n\n\t\tif (!cached) {\n\t\t\tcached = {};\n\t\t\tfilterCache.set(target, cached);\n\t\t}\n\n\t\tif (key in cached) {\n\t\t\treturn cached[key];\n\t\t}\n\n\t\tconst match = pattern => (typeof pattern === 'string' || typeof key === 'symbol') ? key === pattern : pattern.test(key);\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(target, key);\n\t\tconst writableOrConfigurableOwn = (desc === undefined || desc.writable || desc.configurable);\n\t\tconst included = options.include ? options.include.some(match) : !options.exclude.some(match);\n\t\tconst shouldFilter = included && writableOrConfigurableOwn;\n\t\tcached[key] = shouldFilter;\n\t\treturn shouldFilter;\n\t};\n\n\tconst cache = new WeakMap();\n\n\tconst proxy = new Proxy(input, {\n\t\tapply(target, thisArg, args) {\n\t\t\tconst cached = cache.get(target);\n\n\t\t\tif (cached) {\n\t\t\t\treturn Reflect.apply(cached, thisArg, args);\n\t\t\t}\n\n\t\t\tconst pified = options.excludeMain ? target : processFn(target, options, proxy, target);\n\t\t\tcache.set(target, pified);\n\t\t\treturn Reflect.apply(pified, thisArg, args);\n\t\t},\n\n\t\tget(target, key) {\n\t\t\tconst property = target[key];\n\n\t\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\t\tif (!filter(target, key) || property === Function.prototype[key]) {\n\t\t\t\treturn property;\n\t\t\t}\n\n\t\t\tconst cached = cache.get(property);\n\n\t\t\tif (cached) {\n\t\t\t\treturn cached;\n\t\t\t}\n\n\t\t\tif (typeof property === 'function') {\n\t\t\t\tconst pified = processFn(property, options, proxy, target);\n\t\t\t\tcache.set(property, pified);\n\t\t\t\treturn pified;\n\t\t\t}\n\n\t\t\treturn property;\n\t\t}\n\t});\n\n\treturn proxy;\n};\n","const SafeEventEmitter = require('@metamask/safe-event-emitter').default\nconst createScaffoldMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createFilterMiddleware = require('./index.js')\nconst { unsafeRandomBytes, incrementHexInt } = require('./hexUtils.js')\nconst getBlocksForRange = require('./getBlocksForRange.js')\n\nmodule.exports = createSubscriptionMiddleware\n\n\nfunction createSubscriptionMiddleware({ blockTracker, provider }) {\n  // state and utilities for handling subscriptions\n  const subscriptions = {}\n  const filterManager = createFilterMiddleware({ blockTracker, provider })\n\n  // internal flag\n  let isDestroyed = false\n\n  // create subscriptionManager api object\n  const events = new SafeEventEmitter()\n  const middleware = createScaffoldMiddleware({\n    eth_subscribe: createAsyncMiddleware(subscribe),\n    eth_unsubscribe: createAsyncMiddleware(unsubscribe),\n  })\n  middleware.destroy = destroy\n  return { events, middleware }\n\n  async function subscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const subscriptionType = req.params[0]\n    // subId is 16 byte hex string\n    const subId = unsafeRandomBytes(16)\n\n    // create sub\n    let sub\n    switch (subscriptionType) {\n      case 'newHeads':\n        sub = createSubNewHeads({ subId })\n        break\n      case 'logs':\n        const filterParams = req.params[1]\n        const filter = await filterManager.newLogFilter(filterParams)\n        sub = createSubFromFilter({ subId, filter })\n        break\n      default:\n        throw new Error(`SubscriptionManager - unsupported subscription type \"${subscriptionType}\"`)\n\n    }\n    subscriptions[subId] = sub\n\n    res.result = subId\n    return\n\n    function createSubNewHeads({ subId }) {\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          blockTracker.removeListener('sync', sub.update)\n        },\n        update: async ({ oldBlock, newBlock }) => {\n          // for newHeads\n          const toBlock = newBlock\n          const fromBlock = incrementHexInt(oldBlock)\n          const rawBlocks = await getBlocksForRange({ provider, fromBlock, toBlock })\n          const results = rawBlocks.map(normalizeBlock)\n          results.forEach((value) => {\n            _emitSubscriptionResult(subId, value)\n          })\n        }\n      }\n      // check for subscription updates on new block\n      blockTracker.on('sync', sub.update)\n      return sub\n    }\n\n    function createSubFromFilter({ subId, filter }){\n      filter.on('update', result => _emitSubscriptionResult(subId, result))\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          return await filterManager.uninstallFilter(filter.idHex)\n        },\n      }\n      return sub\n    }\n  }\n\n  async function unsubscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const id = req.params[0]\n    const subscription = subscriptions[id]\n    // if missing, return \"false\" to indicate it was not removed\n    if (!subscription) {\n      res.result = false\n      return\n    }\n    // cleanup subscription\n    delete subscriptions[id]\n    await subscription.destroy()\n    res.result = true\n  }\n\n  function _emitSubscriptionResult(filterIdHex, value) {\n    events.emit('notification', {\n      jsonrpc: '2.0',\n      method: 'eth_subscription',\n      params: {\n        subscription: filterIdHex,\n        result: value,\n      },\n    })\n  }\n\n  function destroy () {\n    events.removeAllListeners()\n    for (const id in subscriptions) {\n      subscriptions[id].destroy()\n      delete subscriptions[id]\n    }\n    isDestroyed = true\n  }\n}\n\nfunction normalizeBlock(block) {\n  return {\n    hash: block.hash,\n    parentHash: block.parentHash,\n    sha3Uncles: block.sha3Uncles,\n    miner: block.miner,\n    stateRoot: block.stateRoot,\n    transactionsRoot: block.transactionsRoot,\n    receiptsRoot: block.receiptsRoot,\n    logsBloom: block.logsBloom,\n    difficulty: block.difficulty,\n    number: block.number,\n    gasLimit: block.gasLimit,\n    gasUsed: block.gasUsed,\n    nonce: block.nonce,\n    mixHash: block.mixHash,\n    timestamp: block.timestamp,\n    extraData: block.extraData,\n  }\n}\n","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass TxFilter extends BaseFilter {\n\n  constructor ({ provider }) {\n    super()\n    this.type = 'tx'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock }) {\n    const toBlock = oldBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blocks = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockTxHashes = []\n    for (const block of blocks) {\n      blockTxHashes.push(...block.transactions)\n    }\n    // add to results\n    this.addResults(blockTxHashes)\n  }\n\n}\n\nmodule.exports = TxFilter\n","const extend = require('xtend')\nconst createRandomId = require('json-rpc-random-id')()\n\nmodule.exports = EthQuery\n\n\nfunction EthQuery(provider){\n  const self = this\n  self.currentProvider = provider\n}\n\n//\n// base queries\n//\n\n// default block\nEthQuery.prototype.getBalance =                          generateFnWithDefaultBlockFor(2, 'eth_getBalance')\nEthQuery.prototype.getCode =                             generateFnWithDefaultBlockFor(2, 'eth_getCode')\nEthQuery.prototype.getTransactionCount =                 generateFnWithDefaultBlockFor(2, 'eth_getTransactionCount')\nEthQuery.prototype.getStorageAt =                        generateFnWithDefaultBlockFor(3, 'eth_getStorageAt')\nEthQuery.prototype.call =                                generateFnWithDefaultBlockFor(2, 'eth_call')\n// standard\nEthQuery.prototype.protocolVersion =                     generateFnFor('eth_protocolVersion')\nEthQuery.prototype.syncing =                             generateFnFor('eth_syncing')\nEthQuery.prototype.coinbase =                            generateFnFor('eth_coinbase')\nEthQuery.prototype.mining =                              generateFnFor('eth_mining')\nEthQuery.prototype.hashrate =                            generateFnFor('eth_hashrate')\nEthQuery.prototype.gasPrice =                            generateFnFor('eth_gasPrice')\nEthQuery.prototype.accounts =                            generateFnFor('eth_accounts')\nEthQuery.prototype.blockNumber =                         generateFnFor('eth_blockNumber')\nEthQuery.prototype.getBlockTransactionCountByHash =      generateFnFor('eth_getBlockTransactionCountByHash')\nEthQuery.prototype.getBlockTransactionCountByNumber =    generateFnFor('eth_getBlockTransactionCountByNumber')\nEthQuery.prototype.getUncleCountByBlockHash =            generateFnFor('eth_getUncleCountByBlockHash')\nEthQuery.prototype.getUncleCountByBlockNumber =          generateFnFor('eth_getUncleCountByBlockNumber')\nEthQuery.prototype.sign =                                generateFnFor('eth_sign')\nEthQuery.prototype.sendTransaction =                     generateFnFor('eth_sendTransaction')\nEthQuery.prototype.sendRawTransaction =                  generateFnFor('eth_sendRawTransaction')\nEthQuery.prototype.estimateGas =                         generateFnFor('eth_estimateGas')\nEthQuery.prototype.getBlockByHash =                      generateFnFor('eth_getBlockByHash')\nEthQuery.prototype.getBlockByNumber =                    generateFnFor('eth_getBlockByNumber')\nEthQuery.prototype.getTransactionByHash =                generateFnFor('eth_getTransactionByHash')\nEthQuery.prototype.getTransactionByBlockHashAndIndex =   generateFnFor('eth_getTransactionByBlockHashAndIndex')\nEthQuery.prototype.getTransactionByBlockNumberAndIndex = generateFnFor('eth_getTransactionByBlockNumberAndIndex')\nEthQuery.prototype.getTransactionReceipt =               generateFnFor('eth_getTransactionReceipt')\nEthQuery.prototype.getUncleByBlockHashAndIndex =         generateFnFor('eth_getUncleByBlockHashAndIndex')\nEthQuery.prototype.getUncleByBlockNumberAndIndex =       generateFnFor('eth_getUncleByBlockNumberAndIndex')\nEthQuery.prototype.getCompilers =                        generateFnFor('eth_getCompilers')\nEthQuery.prototype.compileLLL =                          generateFnFor('eth_compileLLL')\nEthQuery.prototype.compileSolidity =                     generateFnFor('eth_compileSolidity')\nEthQuery.prototype.compileSerpent =                      generateFnFor('eth_compileSerpent')\nEthQuery.prototype.newFilter =                           generateFnFor('eth_newFilter')\nEthQuery.prototype.newBlockFilter =                      generateFnFor('eth_newBlockFilter')\nEthQuery.prototype.newPendingTransactionFilter =         generateFnFor('eth_newPendingTransactionFilter')\nEthQuery.prototype.uninstallFilter =                     generateFnFor('eth_uninstallFilter')\nEthQuery.prototype.getFilterChanges =                    generateFnFor('eth_getFilterChanges')\nEthQuery.prototype.getFilterLogs =                       generateFnFor('eth_getFilterLogs')\nEthQuery.prototype.getLogs =                             generateFnFor('eth_getLogs')\nEthQuery.prototype.getWork =                             generateFnFor('eth_getWork')\nEthQuery.prototype.submitWork =                          generateFnFor('eth_submitWork')\nEthQuery.prototype.submitHashrate =                      generateFnFor('eth_submitHashrate')\n\n// network level\n\nEthQuery.prototype.sendAsync = function(opts, cb){\n  const self = this\n  self.currentProvider.sendAsync(createPayload(opts), function(err, response){\n    if (!err && response.error) err = new Error('EthQuery - RPC Error - '+response.error.message)\n    if (err) return cb(err)\n    cb(null, response.result)\n  })\n}\n\n// util\n\nfunction generateFnFor(methodName){\n  return function(){\n    const self = this\n    var args = [].slice.call(arguments)\n    var cb = args.pop()\n    self.sendAsync({\n      method: methodName,\n      params: args,\n    }, cb)\n  }\n}\n\nfunction generateFnWithDefaultBlockFor(argCount, methodName){\n  return function(){\n    const self = this\n    var args = [].slice.call(arguments)\n    var cb = args.pop()\n    // set optional default block param\n    if (args.length < argCount) args.push('latest')\n    self.sendAsync({\n      method: methodName,\n      params: args,\n    }, cb)\n  }\n}\n\nfunction createPayload(data){\n  return extend({\n    // defaults\n    id: createRandomId(),\n    jsonrpc: '2.0',\n    params: [],\n    // user-specified\n  }, data)\n}\n","module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar LIMIT_REPLACE_NODE = '[...]'\nvar CIRCULAR_REPLACE_NODE = '[Circular]'\n\nvar arr = []\nvar replacerStack = []\n\nfunction defaultOptions () {\n  return {\n    depthLimit: Number.MAX_SAFE_INTEGER,\n    edgesLimit: Number.MAX_SAFE_INTEGER\n  }\n}\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  decirc(obj, '', 0, [], undefined, 0, options)\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(obj, replacer, spacer)\n    } else {\n      res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction setReplace (replace, val, k, parent) {\n  var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n  if (propertyDescriptor.get !== undefined) {\n    if (propertyDescriptor.configurable) {\n      Object.defineProperty(parent, k, { value: replace })\n      arr.push([parent, k, val, propertyDescriptor])\n    } else {\n      replacerStack.push([val, k, replace])\n    }\n  } else {\n    parent[k] = replace\n    arr.push([parent, k, val])\n  }\n}\n\nfunction decirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, i, stack, val, depth, options)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  var tmp = deterministicDecirc(obj, '', 0, [], undefined, 0, options) || obj\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(tmp, replacer, spacer)\n    } else {\n      res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    // Ensure that we restore the object as it was.\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n    try {\n      if (typeof val.toJSON === 'function') {\n        return\n      }\n    } catch (_) {\n      return\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, i, stack, val, depth, options)\n        tmp[key] = val[key]\n      }\n      if (typeof parent !== 'undefined') {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as replaced value\nfunction replaceGetterValues (replacer) {\n  replacer =\n    typeof replacer !== 'undefined'\n      ? replacer\n      : function (k, v) {\n        return v\n      }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = part[2]\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n",null,null,null,null,null,null,null,null,null,null,null,"module.exports = IdIterator\n\nfunction IdIterator(opts){\n  opts = opts || {}\n  var max = opts.max || Number.MAX_SAFE_INTEGER\n  var idCounter = typeof opts.start !== 'undefined' ? opts.start : Math.floor(Math.random() * max)\n\n  return function createRandomId () {\n    idCounter = idCounter % max\n    return idCounter++\n  }\n\n}","'use strict';\n\nconst processFn = (fn, opts) => function () {\n\tconst P = opts.promiseModule;\n\tconst args = new Array(arguments.length);\n\n\tfor (let i = 0; i < arguments.length; i++) {\n\t\targs[i] = arguments[i];\n\t}\n\n\treturn new P((resolve, reject) => {\n\t\tif (opts.errorFirst) {\n\t\t\targs.push(function (err, result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i - 1] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tresults.unshift(err);\n\t\t\t\t\t\treject(results);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(results);\n\t\t\t\t\t}\n\t\t\t\t} else if (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targs.push(function (result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(results);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfn.apply(this, args);\n\t});\n};\n\nmodule.exports = (obj, opts) => {\n\topts = Object.assign({\n\t\texclude: [/.+(Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise\n\t}, opts);\n\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\t\treturn opts.include ? opts.include.some(match) : !opts.exclude.some(match);\n\t};\n\n\tlet ret;\n\tif (typeof obj === 'function') {\n\t\tret = function () {\n\t\t\tif (opts.excludeMain) {\n\t\t\t\treturn obj.apply(this, arguments);\n\t\t\t}\n\n\t\t\treturn processFn(obj, opts).apply(this, arguments);\n\t\t};\n\t} else {\n\t\tret = Object.create(Object.getPrototypeOf(obj));\n\t}\n\n\tfor (const key in obj) { // eslint-disable-line guard-for-in\n\t\tconst x = obj[key];\n\t\tret[key] = typeof x === 'function' && filter(key) ? processFn(x, opts) : x;\n\t}\n\n\treturn ret;\n};\n","const util = require('util')\nconst EventEmitter = require('events/')\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n}\n\nmodule.exports = SafeEventEmitter\n\n\nfunction SafeEventEmitter() {\n  EventEmitter.call(this)\n}\n\nutil.inherits(SafeEventEmitter, EventEmitter)\n\nSafeEventEmitter.prototype.emit = function (type) {\n  // copied from https://github.com/Gozala/events/blob/master/events.js\n  // modified lines are commented with \"edited:\"\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    // edited: using safeApply\n    safeApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      // edited: using safeApply\n      safeApply(listeners[i], this, args);\n  }\n\n  return true;\n}\n\nfunction safeApply(handler, context, args) {\n  try {\n    ReflectApply(handler, context, args)\n  } catch (err) {\n    // throw error after timeout so as not to interupt the stack\n    setTimeout(() => {\n      throw err\n    })\n  }\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n"],"names":["events_1","require","safeApply","handler","context","args","Reflect","apply","err","setTimeout","SafeEventEmitter","EventEmitter","emit","type","doError","events","_events","undefined","error","_len","arguments","length","Array","_key","er","Error","concat","message","len","listeners","arr","n","copy","i","arrayClone","exports","Object","defineProperty","value","tslib_1","Semaphore_1","Mutex","this","_semaphore","default","prototype","acquire","__awaiter","_a","__generator","_b","label","sent","runExclusive","callback","isLocked","release","Semaphore","_maxConcurrency","_queue","_value","_this","locked","ticket","Promise","r","push","_dispatch","trys","_currentReleaser","releaser","nextConsumer","shift","released","Mutex_1","enumerable","get","withTimeout_1","withTimeout","sync","timeout","timeoutError","resolve","reject","isTimeout","isArray","calculateSum","accumulator","currentValue","blockTrackerEvents","hexToInt","hexInt","Number","parseInt","module","constructor","opts","super","_blockResetDuration","blockResetDuration","_blockResetTimeout","_currentBlock","_isRunning","_onNewListener","bind","_onRemoveListener","_resetCurrentBlock","_setupInternalEvents","isRunning","getCurrentBlock","getLatestBlock","once","removeAllListeners","eventName","_start","_end","removeListener","on","includes","_maybeStart","_getBlockTrackerEventCount","_maybeEnd","_cancelBlockResetTimeout","_setupBlockResetTimeout","map","listenerCount","reduce","_newPotentialLatest","newBlock","currentBlock","_setCurrentBlock","oldBlock","unref","clearTimeout","pify","BaseBlockTracker","duration","timoutRef","provider","pollingInterval","retryTimeout","keepEventLoopActive","setSkipCacheFlag","assign","_provider","_pollingInterval","_retryTimeout","_keepEventLoopActive","_setSkipCacheFlag","checkForLatestBlock","_updateLatestBlock","_performSync","catch","newErr","stack","emitErr","console","latestBlock","_fetchLatestBlock","req","jsonrpc","id","method","params","skipCache","res","cb","sendAsync","result","BaseFilter","allResults","update","addResults","newResults","addInitialResults","getAllResults","updates","initialize","forEach","getChangesAndClear","getBlocksForRange","incrementHexInt","_ref","_ref2","toBlock","fromBlock","blockHashes","block","hash","hexString","intToHex","int","toString","async","fromBlockNumber","toBlockNumber","missingBlockNumbers","fill","_","index","all","blockNum","query","sortBlockRefs","refs","sort","refA","refB","unsafeRandomNibble","Math","floor","random","minBlockRef","maxBlockRef","_len2","_key2","sortedRefs","bnToHex","bn","blockRefIsNumber","blockRef","unsafeRandomBytes","byteCount","createAsyncMiddleware","createJsonRpcMiddleware","LogFilter","BlockFilter","TxFilter","toFilterCreationMiddleware","createFilterFn","toAsyncRpcMiddleware","filter","asyncFn","objValues","obj","fn","values","key","blockTracker","filterIndex","filters","mutex","waitForFree","_ref4","middleware","next","end","mutexMiddlewareWrapper","eth_newFilter","newLogFilter","eth_newBlockFilter","newBlockFilter","eth_newPendingTransactionFilter","newPendingTransactionFilter","eth_uninstallFilter","uninstallFilterHandler","eth_getFilterChanges","getFilterChanges","eth_getFilterLogs","getFilterLogs","filterUpdater","releaseLock","uninstallFilter","destroy","prevFilterCount","updateBlockTrackerSubs","newFilterCount","uninstallAllFilters","installFilter","filterIndexHex","results","Boolean","idHex","_ref3","EthQuery","BaseFilterWithHistory","ethQuery","address","topics","toLowerCase","newLogs","_fetchLogs","matchingLogs","log","matchLog","getLogs","blockNumber","normalizedLogAddress","every","topicPattern","logTopic","subtopicsToMatch","topic","handlers","processFn","options","proxy","unwrapped","arguments_","P","promiseModule","multiArgs","errorFirst","self","filterCache","WeakMap","input","exclude","objectType","TypeError","cache","Proxy","target","thisArg","cached","pified","excludeMain","set","property","match","pattern","test","desc","getOwnPropertyDescriptor","writableOrConfigurableOwn","writable","configurable","shouldFilter","include","some","Function","createScaffoldMiddleware","createFilterMiddleware","normalizeBlock","parentHash","sha3Uncles","miner","stateRoot","transactionsRoot","receiptsRoot","logsBloom","difficulty","number","gasLimit","gasUsed","nonce","mixHash","timestamp","extraData","subscriptions","filterManager","isDestroyed","eth_subscribe","subscriptionType","subId","sub","createSubNewHeads","filterParams","createSubFromFilter","_emitSubscriptionResult","eth_unsubscribe","subscription","filterIdHex","blocks","blockTxHashes","transactions","extend","createRandomId","currentProvider","generateFnFor","methodName","slice","call","pop","generateFnWithDefaultBlockFor","argCount","getBalance","getCode","getTransactionCount","getStorageAt","protocolVersion","syncing","coinbase","mining","hashrate","gasPrice","accounts","getBlockTransactionCountByHash","getBlockTransactionCountByNumber","getUncleCountByBlockHash","getUncleCountByBlockNumber","sign","sendTransaction","sendRawTransaction","estimateGas","getBlockByHash","getBlockByNumber","getTransactionByHash","getTransactionByBlockHashAndIndex","getTransactionByBlockNumberAndIndex","getTransactionReceipt","getUncleByBlockHashAndIndex","getUncleByBlockNumberAndIndex","getCompilers","compileLLL","compileSolidity","compileSerpent","newFilter","getWork","submitWork","submitHashrate","data","response","stringify","stable","deterministicStringify","stableStringify","LIMIT_REPLACE_NODE","CIRCULAR_REPLACE_NODE","replacerStack","defaultOptions","depthLimit","MAX_SAFE_INTEGER","edgesLimit","replacer","spacer","decirc","JSON","replaceGetterValues","part","setReplace","replace","val","k","parent","propertyDescriptor","edgeIndex","depth","keys","compareFunction","a","b","tmp","deterministicDecirc","toJSON","v","splice","safe_event_emitter_1","__importDefault","eth_rpc_errors_1","JsonRpcEngine","_middleware","handle","_handleBatch","_handle","_promiseHandle","asMiddleware","middlewareError","isComplete","returnHandlers","_runAllMiddleware","_runReturnHandlers","handlerCallback","reqs","responses","_err","callerReq","EthereumRpcError","errorCodes","rpc","invalidRequest","request","_processRequest","_error","serializeError","_checkForCompletion","middlewareStack","_runMiddleware","reverse","returnHandler","internal","jsonify","asyncMiddleware","resolveNextPromise","nextPromise","returnHandlerCallback","nextWasCalled","asyncNext","runReturnHandlersCallback","MAX","idCounter","getUniqueId_1","originalId","newId","getUniqueId","done","__exportStar","JsonRpcEngine_1","engine","fast_safe_stringify_1","code","isInteger","serialize","serialized","stringifyReplacer","isValidEthProviderCode","invalidInput","resourceNotFound","resourceUnavailable","transactionRejected","methodNotSupported","limitExceeded","parse","methodNotFound","invalidParams","userRejectedRequest","unauthorized","unsupportedMethod","disconnected","chainDisconnected","standard","classes_1","utils_1","error_constants_1","getEthJsonRpcError","arg","parseOpts","getMessageFromCode","getEthProviderError","EthereumProviderError","server","custom","errors_1","ethErrors","FALLBACK_ERROR_CODE","FALLBACK_MESSAGE","FALLBACK_ERROR","fallbackMessage","codeString","hasKey","errorValues","isJsonRpcServerError","JSON_RPC_SERVER_ERROR_MESSAGE","isValidCode","assignOriginalError","hasOwnProperty","fallbackError","shouldIncludeStack","originalError","max","start","unshift","ret","create","getPrototypeOf","x","util","R","ReflectApply","receiver","inherits","Buffer","isEncoding","encoding","StringDecoder","nb","enc","nenc","retried","_normalizeEncoding","normalizeEncoding","text","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","write","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","allocUnsafe","utf8CheckByte","byte","buf","p","utf8CheckExtraBytes","c","charCodeAt","total","j","utf8CheckIncomplete","buffer","copyProps","src","dst","SafeBuffer","encodingOrOffset","from","alloc","allocUnsafeSlow","size","SlowBuffer","config","name","global","localStorage","String","msg","warned","trace","warn","source"],"sourceRoot":""}